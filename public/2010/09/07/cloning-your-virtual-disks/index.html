<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" type="image/png" href="https://tenbulls.co.uk/favicon.ico" />
<meta property="og:url" content="https://tenbulls.co.uk/posts/2010/09/07/cloning-your-virtual-disks/">
  <meta property="og:site_name" content="tenbulls blog">
  <meta property="og:title" content="Cloning your VirtualBox virtual disks">
  <meta property="og:description" content="The cloning of disk images (especially Windows) can present a few problems from the OS perspective which I shall expand upon shortly, however depending upon the Virtualization solution that you are using there can be a few problems to overcome unique to that solution.
Get a new GUID VirtualBox uses a GUIDs in several places to uniquely identify various things. I’m not really sure I like this, and haven’t really thought about why it is required, but it could have something to do with the multi-platform support of VirtualBox and its VMs.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2010-09-07T14:23:00+01:00">
    <meta property="article:modified_time" content="2010-09-07T14:23:00+01:00">

<title>tenbulls blog | Cloning your VirtualBox virtual disks</title>

      <link rel="stylesheet" href="/css/main.min.9c8fd37ab394163a75f3b9f19662b76ee3aa3538a20e35f5c0abe36f677c8302.css" integrity="sha256-nI/TerOUFjp187nxlmK3buOqNTiiDjX1wKvjb2d8gwI=" crossorigin="anonymous">
        <link rel="stylesheet" href="/css/palette/default.min.98db41a18eb278705557b678b4ad23b154f0f60e0dc69d3672f24207a951505b.css" integrity="sha256-mNtBoY6yeHBVV7Z4tK0jsVTw9g4Nxp02cvJCB6lRUFs=" crossorigin="anonymous">

      <script src="/js/main.86bb3d8e6f46df0fc97c2731e6b99175a13b87a4086acf578ff9b6992fcf32c1.js" integrity="sha256-hrs9jm9G3w/JfCcx5rmRdaE7h6QIas9Xj/m2mS/PMsE=" crossorigin="anonymous"></script>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

</head>

<body
    class="dark"
>
  
  <main>
    
  <div class="container pt-5">
    <div class="row mt-5 pt-5">
      
  <nav aria-label="breadcrumb" class="small navbar navbar-expand-lg">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleMenu" aria-controls="collapsibleMenu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse mt-3 mt-md-0" id="collapsibleMenu">
      <ol class="breadcrumb fw-bold">
    <li class="breadcrumb-item my-1 my-md-0 ms-3 ms-md-0">
      <a href="/about"
        
      >about</a>
      
    </li>
    <li class="breadcrumb-item my-1 my-md-0 ms-3 ms-md-0">
      <a href="/"
        
      >home</a>
      
    </li>
    <li class="breadcrumb-item my-1 my-md-0 ms-3 ms-md-0">
      <a href="https://www.meetup.com/hybrid-virtual-group/"
        
          target="_blank" rel="noopener noreferrer"
        
      >meetup</a>
      
    </li>
    <li class="breadcrumb-item my-1 my-md-0 ms-3 ms-md-0">
      <a href="/posts"
        class="text-decoration-underline link-offset-3"
        
      >posts</a>
      
    </li>
      </ol>
    </div>
  </nav>

    </div>
    <div class="post">
      <header class="mb-4">
        <h1 class="text-uppercase">Cloning your VirtualBox virtual disks</h1>
        
        
        <div aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item small">
              
              <time datetime="2010-09-07T14:23:00&#43;01:00">September 7, 2010</time>
            </li>
            
            
            <li class="breadcrumb-item small">
              3 minutes
            </li>
          </ol>
        </div>
      </header>
      
      <article>
        <p>The cloning of disk images (especially Windows) can present a few problems from the OS perspective which I shall expand upon shortly, however depending upon the Virtualization solution that you are using there can be a few problems to overcome unique to that solution.</p>
<h1 id="get-a-new-guid">Get a new GUID</h1>
<p>VirtualBox uses a GUIDs in several places to uniquely identify various things. I&rsquo;m not really sure I like this, and haven&rsquo;t really thought about why it is required, but it could have something to do with the multi-platform support of VirtualBox and its VMs.</p>
<p>Not only is the Virtual Machine itself identified by a GUID, but the Virtual Disks they use do too. Where the Virtual Machine&rsquo;s GUID can be altered fairly easily in an XML configuration file, there is a hard-coded GUID in the Virtual Disks. This presents a problem when you copy (or clone) the Virtual Disk, but there seems to be a couple of ways around it.</p>
<p>The first is to make a file copy of the Virtual Disk whilst it is obviously not in use. Then you can use the VBoxManage internalcommands command to set a new GUID on your copied disk as thus:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>VBoxManage internalcommands sethduuid newimagename.vdi
</span></span></code></pre></div><p><img src="/images/2010/setguid1.png" alt="Set disk UUID"></p>
<p>The second slightly more involved way is to use the VBoxManage clonevdi command to copy a disk image and auto set a new GUID on this copy. The slight quirk is that it appears that in order for you to copy an existing disk, your source disk needs to be released and deleted from the VirtualBox Media Manager. Obviously if you need to do this, ensure that when presented with the option to remove the physical media from the disk, you select the option no leave the physical media on disk! Once you have copied the source disk, you can then add it back into the Media Manager and attach back into its respective VM. The other quirk is that it appears as though you need to close your VirtualBox GUI interface for the clone to complete -but this could just be me being impatient and jumping to conclusions. The clonevdi syntax is as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>VBoxManage  clonevdi sourcedisk destinationdisk
</span></span></code></pre></div><p><img src="/images/2010/clonevdi1.png" alt="Clone disk"></p>
<p>If a destination path is not specified then your cloned disk will end up in the VirtualBox default disk location, which on Linux systems is usually <code>~/.VirtualBox/HardDisks.</code></p>
<p>Once your clone is completed you can then add back in your disks to the Media Manager.</p>
<h1 id="ask-sid">Ask SID</h1>
<p>The problem with Windows disk duplication is that internally to the OS, every machine has its own Security Identifier known as the Machine SID. In the past it has been customary to change the Machine SID since there has always been a believe that this was required in order to avoid problems. I personally have come across a few, and from recollection I think I have experienced issues with duplicate Machine SIDs when using SMS 2.0 and clustering in the past. Even though I think in most cases having duplicate SIDs would not cause an issue, it is something that I would still insist on for peace of mind and in case MSS help is required.</p>
<p>Anyway the following <a href="https://blogs.technet.com/b/markrussinovich/archive/2009/11/03/3291024.aspx">link</a> written by Mark Russinovich provides more information on how to change the Machine SID and whether it is still really required. Interestingly my old favorite tool NewSid is no more, although sysprep does the job (more on this perhaps another time).</p>

      </article>
      

      <div class="row">
    <div class="col-md">
        
        <a href="https://tenbulls.co.uk/posts/2010/09/06/virtualb-disk-corruption-on-ext4-file-systems/">
            <span>previous: </span>
            <span>VirtualBox virtual disk corruption when using ext4 host partitions</span>
        </a>
        
    </div>
    <div class="col-md text-md-end">
        
        <a href="https://tenbulls.co.uk/posts/2010/09/16/corrupt-behaviour/">
            <span>next: </span>
            <span>An approach to dealing with database corruptoin</span>
        </a>
        
    </div>
</div>
      
    </div>
  </div>
  <footer>
    <div class="container mt-4 pb-1">
    <p class="small opacity-75">
        Copyright © 2026 Mark Broadbent
        
    </p>
</div>

  </footer>

  </main>

  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
