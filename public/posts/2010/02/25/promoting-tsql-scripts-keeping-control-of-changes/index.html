<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" type="image/png" href="https://tenbulls.co.uk/favicon.ico" />
<meta property="og:url" content="https://tenbulls.co.uk/posts/2010/02/25/promoting-tsql-scripts-keeping-control-of-changes/">
  <meta property="og:site_name" content="tenbulls blog">
  <meta property="og:title" content="Good practices for manual SQL script promotion">
  <meta property="og:description" content="An often overlooked part of promoting DML scripts is knowing what the intention is going to be before one is run. For instance if you work in an environment with a high throughput of DML script promotions then there is a good chance that those scripts will be ran via change control and then the results fed back. However what happens when the result counts end up being incorrect (i.e different to what was anticipated)? A rollback occurs and we are then talking about possible availability issues.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2010-02-25T14:36:00+01:00">
    <meta property="article:modified_time" content="2010-02-25T14:36:00+01:00">

<title>tenbulls blog | Good practices for manual SQL script promotion</title>

      <link rel="stylesheet" href="/css/main.min.e527a301080eb1b5d1bbc5aa41af83b36de499b1bcf899fc56d075ab38c5027c.css" integrity="sha256-5SejAQgOsbXRu8WqQa&#43;Ds23kmbG8&#43;Jn8VtB1qzjFAnw=" crossorigin="anonymous">
        <link rel="stylesheet" href="/css/palette/default.min.98db41a18eb278705557b678b4ad23b154f0f60e0dc69d3672f24207a951505b.css" integrity="sha256-mNtBoY6yeHBVV7Z4tK0jsVTw9g4Nxp02cvJCB6lRUFs=" crossorigin="anonymous">

      <script src="/js/main.86bb3d8e6f46df0fc97c2731e6b99175a13b87a4086acf578ff9b6992fcf32c1.js" integrity="sha256-hrs9jm9G3w/JfCcx5rmRdaE7h6QIas9Xj/m2mS/PMsE=" crossorigin="anonymous"></script>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

</head>

<body
    class="dark"
>
  
  <main>
    
  <div class="container pt-5">
    <div class="row mt-5 pt-5">
      
  <nav aria-label="breadcrumb" class="small navbar navbar-expand-lg">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleMenu" aria-controls="collapsibleMenu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse mt-3 mt-md-0" id="collapsibleMenu">
      <ol class="breadcrumb fw-bold">
    <li class="breadcrumb-item my-1 my-md-0 ms-3 ms-md-0">
      <a href="/about"
        
      >about</a>
      
    </li>
    <li class="breadcrumb-item my-1 my-md-0 ms-3 ms-md-0">
      <a href="/"
        
      >home</a>
      
    </li>
    <li class="breadcrumb-item my-1 my-md-0 ms-3 ms-md-0">
      <a href="https://www.meetup.com/hybrid-virtual-group/"
        
          target="_blank" rel="noopener noreferrer"
        
      >meetup</a>
      
    </li>
    <li class="breadcrumb-item my-1 my-md-0 ms-3 ms-md-0">
      <a href="/posts"
        class="text-decoration-underline link-offset-3"
        
      >posts</a>
      
    </li>
      </ol>
    </div>
  </nav>

    </div>
    <div class="post">
      <header class="mb-4">
        <h1 class="text-uppercase">Good practices for manual SQL script promotion</h1>
        
        
        <div aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item small">
              
              <time datetime="2010-02-25T14:36:00&#43;01:00">February 25, 2010</time>
            </li>
            
            
            <li class="breadcrumb-item small">
              2 minutes
            </li>
          </ol>
        </div>
      </header>
      
      <article>
        <p>An often overlooked part of promoting DML scripts is knowing what the intention is going to be before one is run. For instance if you work in an environment with a high throughput of DML script promotions then there is a good chance that those scripts will be ran via change control and then the results fed back. However what happens when the result counts end up being incorrect (i.e different to what was anticipated)? A rollback occurs and we are then talking about possible availability issues.</p>
<p>This is why it is very important to ensure that any DML script clearly has expected change counts listed and that there is always a <code>WHERE</code> clause specified in the DML statement. If the DML operation is on all rows of a table then the <code>WHERE</code> clause should still be included specifying <code>1=1</code> to demonstrate that this is the intent.</p>
<p>Finally executing the script in an open ended <code>BEGIN TRAN</code> would be preferable so that a simple <code>ROLLBACK</code> can be issued if the counts are incorrect. However be careful to not leave the transaction open otherwise you may cause lots of blocking activity on your server.</p>
<p>Another safety precautionary measure you can take in addition to backups could be creating a snapshot on the database prior to any <code>COMMIT</code> which would provide you other recovery options beyond restoring the database such as using the snapshot data to help revert the changed data back. Or worst case a very quick revert of the entire snapshot. In the latter scenario, the consideration would be that any transaction that occurred after the snapshot was taken would be lost - so be very careful to understand what you are doing.</p>
<p>Hope this post gives you some food for thought.</p>

      </article>
      

      <div class="row">
    <div class="col-md">
        
        <a href="https://tenbulls.co.uk/posts/2010/01/19/disabling-and-enabling-oracle-scheduled-jobs-in-sqlplus/">
            <span>previous: </span>
            <span>Disabling and Enabling Oracle Scheduled Jobs in sqlplus</span>
        </a>
        
    </div>
    <div class="col-md text-md-end">
        
        <a href="https://tenbulls.co.uk/posts/2010/04/20/searching-active-directory-membership-when-a-gui-just-aint-enough./">
            <span>next: </span>
            <span>How to search Active Directory membership</span>
        </a>
        
    </div>
</div>
      
    </div>
  </div>
  <footer>
    <div class="container mt-4 pb-1">
    <p class="small opacity-75">
        Copyright Â© 2026 Mark Broadbent
        
    </p>
</div>

  </footer>

  </main>

  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
