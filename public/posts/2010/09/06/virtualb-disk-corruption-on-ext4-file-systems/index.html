<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" type="image/png" href="http://localhost:1313/favicon.ico" />
<meta property="og:url" content="http://localhost:1313/posts/2010/09/06/virtualb-disk-corruption-on-ext4-file-systems/">
  <meta property="og:site_name" content="tenbulls blog">
  <meta property="og:title" content="VirtualBox virtual disk corruption when using ext4 host partitions">
  <meta property="og:description" content="Sometimes it is not always a great idea to be running the latest and greatest, and it seems that there is a small problem when VirtualBox virtual machines have their virtual disks housed on ext4 filesystems. I am sure that this will be corrected at some point, but in the meantime luckily there is a simple workaround.
When the virtual machine is first started up, and if the error condition is satisfied, you are prompt with the warning message.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2010-09-06T16:02:00+01:00">
    <meta property="article:modified_time" content="2010-09-06T16:02:00+01:00">

<title>tenbulls blog | VirtualBox virtual disk corruption when using ext4 host partitions</title>

    <link rel="stylesheet" href="/css/main.css">
      <link rel="stylesheet" href="/css/palette/default.css">

      <script src="/js/main.js"></script>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

</head>

<body
    class="dark"
>
  
  <main>
    
  <div class="container pt-5">
    <div class="row mt-5 pt-5">
      
  <nav aria-label="breadcrumb" class="small navbar navbar-expand-lg">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleMenu" aria-controls="collapsibleMenu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse mt-3 mt-md-0" id="collapsibleMenu">
      <ol class="breadcrumb fw-bold">
    <li class="breadcrumb-item my-1 my-md-0 ms-3 ms-md-0">
      <a href="/about"
        
      >about</a>
      
    </li>
    <li class="breadcrumb-item my-1 my-md-0 ms-3 ms-md-0">
      <a href="/"
        
      >home</a>
      
    </li>
    <li class="breadcrumb-item my-1 my-md-0 ms-3 ms-md-0">
      <a href="https://www.meetup.com/hybrid-virtual-group/"
        
          target="_blank" rel="noopener noreferrer"
        
      >meetup</a>
      
    </li>
    <li class="breadcrumb-item my-1 my-md-0 ms-3 ms-md-0">
      <a href="/posts"
        class="text-decoration-underline link-offset-3"
        
      >posts</a>
      
    </li>
      </ol>
    </div>
  </nav>

    </div>
    <div class="post">
      <header class="mb-4">
        <h1 class="text-uppercase">VirtualBox virtual disk corruption when using ext4 host partitions</h1>
        
        
        <div aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item small">
              
              <time datetime="2010-09-06T16:02:00&#43;01:00">September 6, 2010</time>
            </li>
            
            
            <li class="breadcrumb-item small">
              2 minutes
            </li>
          </ol>
        </div>
      </header>
      
      <article>
        <p>Sometimes it is not always a great idea to be running the latest and greatest, and it seems that there is a small problem when VirtualBox virtual machines have their virtual disks housed on ext4 filesystems. I am sure that this will be corrected at some point, but in the meantime luckily there is a simple workaround.</p>
<blockquote>
<p>When the virtual machine is first started up, and if the error condition is satisfied, you are prompt with the warning message.</p>
<p>The virtual machine execution may run into an error condition as described below. We suggest that you take an appropriate action to avert the error.</p>
<p>The host I/O cache for at least one controller is disabled and the medium &lsquo;/home/xxxx/server1_disk1.vdi&rsquo; for this VM is located on an ext4 partition. There is a known Linux kernel bug which can lead to the corruption of the virtual disk image under these conditions.</p>
<p>Either enable the host I/O cache permanently in the VM settings or put the disk image and the snapshot folder onto a different file system.</p>
<p>The host I/O cache will now be enabled for this medium.</p>
</blockquote>
<p>If you receive the warning message the best thing to do is to immediately shutdown your VM (your IO cache will have been temporarily set) and locate the host IO cache checkbox.</p>
<p><img src="/images/2010/disk_cache_warning.png" alt="Disk cache warning"></p>
<p>To get there, first click the Storage option in the sidebar, then click each and every disk controller that services any disks housed on ext4 partitions. From there it is possible to set the host IO cache permanently.</p>
<p><img src="/images/2010/diskcache.png" alt="Use host I/O cache"></p>
<p>Perhaps it&rsquo;s time to revert back to ext2 or 3? First I shall look into the benefits of running on ext4,  and if I am not gaining anything from it I proabably will.</p>

      </article>
      

      <div class="row">
    <div class="col-md">
        
        <a href="http://localhost:1313/posts/2010/09/02/what-a-real-server-should-be/">
            <span>previous: </span>
            <span>Microsofts new GUI-less server OS</span>
        </a>
        
    </div>
    <div class="col-md text-md-end">
        
        <a href="http://localhost:1313/posts/2010/09/07/cloning-your-virtual-disks/">
            <span>next: </span>
            <span>Cloning your VirtualBox virtual disks</span>
        </a>
        
    </div>
</div>
      
    </div>
  </div>
  <footer>
    <div class="container mt-4 pb-1">
    <p class="small opacity-75">
        Copyright Â© 2026 Mark Broadbent
        
    </p>
</div>

  </footer>

  </main>

  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
