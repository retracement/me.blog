<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" type="image/png" href="http://localhost:1313/favicon.ico" />
<meta property="og:url" content="http://localhost:1313/posts/2009/03/05/moving-sql-server-data-and-log-files-dont-detach/">
  <meta property="og:site_name" content="tenbulls blog">
  <meta property="og:title" content="How to move your SQL Data and Log files correctly!">
  <meta property="og:description" content="Recently I came across the ALTER FILE part of the ALTER DATABASE command and started thinking about its use when moving physical datafiles.
I must admit that this particular part of the ALTER DATABASE command has largely gone unused. Whilst the REMOVE FILE part is infrequently used and the ADD FILE part is possibly more so, the intuitive nature of the SQL 2005 and above GUI (and even SQL 7 and 2000 to some extent) has meant that resorting to various statements is largely unnecessary. In fact, the only times that I can really recall having resorted to the MODIFY operator is when I have been renaming logical file names.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2009-03-05T02:13:46+01:00">
    <meta property="article:modified_time" content="2009-03-05T02:13:46+01:00">

<title>tenbulls blog | How to move your SQL Data and Log files correctly!</title>

    <link rel="stylesheet" href="/css/main.css">
      <link rel="stylesheet" href="/css/palette/default.css">

      <script src="/js/main.js"></script>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

</head>

<body
    class="dark"
>
  
  <main>
    
  <div class="container pt-5">
    <div class="row mt-5 pt-5">
      
  <nav aria-label="breadcrumb" class="small navbar navbar-expand-lg">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleMenu" aria-controls="collapsibleMenu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse mt-3 mt-md-0" id="collapsibleMenu">
      <ol class="breadcrumb fw-bold">
    <li class="breadcrumb-item my-1 my-md-0 ms-3 ms-md-0">
      <a href="/about"
        
      >about</a>
      
    </li>
    <li class="breadcrumb-item my-1 my-md-0 ms-3 ms-md-0">
      <a href="/"
        
      >home</a>
      
    </li>
    <li class="breadcrumb-item my-1 my-md-0 ms-3 ms-md-0">
      <a href="https://www.meetup.com/hybrid-virtual-group/"
        
          target="_blank" rel="noopener noreferrer"
        
      >meetup</a>
      
    </li>
    <li class="breadcrumb-item my-1 my-md-0 ms-3 ms-md-0">
      <a href="/posts"
        class="text-decoration-underline link-offset-3"
        
      >posts</a>
      
    </li>
      </ol>
    </div>
  </nav>

    </div>
    <div class="post">
      <header class="mb-4">
        <h1 class="text-uppercase">How to move your SQL Data and Log files correctly!</h1>
        
        
        <div aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item small">
              
              <time datetime="2009-03-05T02:13:46&#43;01:00">March 5, 2009</time>
            </li>
            
            
            <li class="breadcrumb-item small">
              2 minutes
            </li>
          </ol>
        </div>
      </header>
      
      <article>
        <p>Recently I came across the <code>ALTER FILE</code> part of the <code>ALTER DATABASE</code> command and started thinking about its use when moving physical datafiles.</p>
<p>I must admit that this particular part of the <code>ALTER DATABASE</code> command has largely gone unused. Whilst the <code>REMOVE FILE</code> part is infrequently used and the <code>ADD FILE</code> part is possibly more so, the intuitive nature of the SQL 2005 and above GUI (and even SQL 7 and 2000 to some extent) has meant that resorting to various statements is largely unnecessary. In fact, the only times that I can really recall having resorted to the <code>MODIFY</code> operator is when I have been renaming logical file names.</p>
<p>For instance normally when I have a situation in which a database has been created with its log and data file/s located at the wrong locations, the simple solution would be to detach, move files around, reattach primary file specifying the locations of all the other files. Alternatively, if you like creating work for yourself then a backup and restore back over the top of the database, changing the restore locations of the database files would also work. These two operations, of course, can be performed quite easily through the GUI or command line alike and therefore have not to date posed any real issues to me.</p>
<p>However, this is really a “closing the door after the horse has bolted” method. I have found that using the <code>ALTER FILE</code> command it is far easier to change the physical locations where SQL Server will look for the database file/s, take the database <code>OFFLINE</code>, move the files to the relevant locations and finally bring the database back <code>ONLINE</code>. Now the reason that I believe that this is an improvement over the detach move and reattach method is that you are not removing (and adding back in) the database from the system catalogs. This method should, therefore, be quicker to perform, and I believe less prone to manual error.</p>
<p>Update (27/05/2009) : Further to this article titled <a href="https://www.sqlservercentral.com/articles/Administration/65896/">Moving Database Files Detach/Attach or ALTER DATABASE?</a> I have just come across the following article which goes into a little more detail and reasoning.</p>

      </article>
      

      <div class="row">
    <div class="col-md">
        
    </div>
    <div class="col-md text-md-end">
        
        <a href="http://localhost:1313/posts/2009/03/19/auto-generating-statements-every-dba-should-try-one/">
            <span>next: </span>
            <span>Auto generate RESTORE scripts from a live database</span>
        </a>
        
    </div>
</div>
      
    </div>
  </div>
  <footer>
    <div class="container mt-4 pb-1">
    <p class="small opacity-75">
        Copyright © 2026 Mark Broadbent
        
    </p>
</div>

  </footer>

  </main>

  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
